---
all:
  children:
    airflow_servers:
      hosts:
        airflow-prod:
          ansible_host: "{{ lookup('env', 'AIRFLOW_SERVER_IP') | default('your-server-ip', true) }}"
          ansible_user: "{{ lookup('env', 'AIRFLOW_SERVER_USER') | default('ubuntu', true) }}"
          ansible_ssh_private_key_file: "{{ lookup('env', 'AIRFLOW_SSH_KEY') | default('~/.ssh/id_rsa', true) }}"
          ansible_python_interpreter: /usr/bin/python3

  vars:
    # Airflow configuration
    airflow_home: /opt/airflow
    airflow_user: airflow
    airflow_group: airflow

    # Docker configuration
    docker_compose_version: "2.24.0"

    # Airflow credentials (override in vault or environment)
    airflow_admin_user: "{{ lookup('env', 'AIRFLOW_ADMIN_USER') | default('airflow', true) }}"
    airflow_admin_password: "{{ lookup('env', 'AIRFLOW_ADMIN_PASSWORD') | default('airflow', true) }}"
    airflow_postgres_user: "{{ lookup('env', 'AIRFLOW_POSTGRES_USER') | default('airflow', true) }}"
    airflow_postgres_password: "{{ lookup('env', 'AIRFLOW_POSTGRES_PASSWORD') | default('airflow', true) }}"
    airflow_secret_key: "{{ lookup('env', 'AIRFLOW_SECRET_KEY') | default('change-me-in-production', true) }}"

    # Webserver customization
    airflow_navbar_color: "#b71c1c"
